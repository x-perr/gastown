formula: rule-of-five
type: expansion
description: >
  Jeffrey Emanuel's discovery: LLM agents produce best work through 4-5
  iterative refinements. Breadth-first exploration, then editorial passes.
version: 1
template:
  - id: "{target}.draft"
    description: >
      Initial attempt at: {target.description}. Don't aim for perfection.
      Get the shape right. Breadth over depth.

  - id: "{target}.refine-1"
    description: >
      First refinement pass. Focus: CORRECTNESS. Fix errors, bugs, mistakes.
      Is the logic sound?
    needs: ["{target}.draft"]

  - id: "{target}.refine-2"
    description: >
      Second refinement pass. Focus: CLARITY. Can someone else understand
      this? Simplify. Remove jargon.
    needs: ["{target}.refine-1"]

  - id: "{target}.refine-3"
    description: >
      Third refinement pass. Focus: EDGE CASES. What could go wrong?
      What's missing? Handle the unusual.
    needs: ["{target}.refine-2"]

  - id: "{target}.refine-4"
    description: >
      Final polish. Focus: EXCELLENCE. This is the last pass. Make it shine.
      Is this something you'd be proud to ship?
    needs: ["{target}.refine-3"]
